{"level":"error","message":"Failed to initialize SignalWire Voice client: Missing `project`","service":"11wire-api","timestamp":"2025-08-01 00:40:40"}
{"level":"info","message":"Created storage directory: /Users/kremlin/Downloads/11Wire/backend/src/storage","service":"11wire-api","timestamp":"2025-08-01 00:40:40"}
{"level":"info","message":"Created audio storage directory: /Users/kremlin/Downloads/11Wire/backend/src/storage/audio","service":"11wire-api","timestamp":"2025-08-01 00:40:40"}
{"level":"info","message":"Database connection has been established successfully.","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Database connected successfully","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Database models synchronized","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Seeding initial campaign data...","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Campaign seed completed","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"All seeders completed successfully","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"WebSocket server initialized for audio streaming","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Initializing scheduled jobs...","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Scheduling job: stt-mapping-cleanup (every 360 minutes)","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Scheduled jobs initialized","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Server running on port 3000","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Environment: development","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"WebSocket server initialized for audio streaming on /stream","service":"11wire-api","timestamp":"2025-08-01 00:40:41"}
{"level":"info","message":"Running initial stt-mapping-cleanup job","service":"11wire-api","timestamp":"2025-08-01 00:40:51"}
{"level":"info","message":"Starting cleanup of old/stale STT request mappings...","service":"11wire-api","timestamp":"2025-08-01 00:40:51"}
{"level":"info","message":"Deleted 0 completed mapping(s) older than 7 days","service":"11wire-api","timestamp":"2025-08-01 00:40:51"}
{"level":"info","message":"Deleted 0 pending mapping(s) older than 1 days","service":"11wire-api","timestamp":"2025-08-01 00:40:51"}
{"level":"info","message":"Deleted 0 failed mapping(s) older than 3 days","service":"11wire-api","timestamp":"2025-08-01 00:40:51"}
{"level":"info","message":"Marked 0 pending mapping(s) as expired (older than 2 hours)","service":"11wire-api","timestamp":"2025-08-01 00:40:51"}
{"level":"info","message":"STT mapping cleanup completed: 0 deleted, 0 expired","service":"11wire-api","timestamp":"2025-08-01 00:40:51"}
{"level":"error","message":"ElevenLabs API health check failed: Invalid value \"undefined\" for header \"xi-api-key\"","service":"11wire-api","timestamp":"2025-08-01 00:41:56"}
{"level":"info","message":"::1 - - [01/Aug/2025:05:41:56 +0000] \"GET /api/health HTTP/1.1\" 200 655 \"-\" \"curl/8.7.1\"","service":"11wire-api","timestamp":"2025-08-01 00:41:56"}
{"level":"info","message":"::1 - - [01/Aug/2025:05:42:53 +0000] \"GET /api/health/audio-bridge HTTP/1.1\" 200 466 \"-\" \"curl/8.7.1\"","service":"11wire-api","timestamp":"2025-08-01 00:42:53"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"11wire-api","timestamp":"2025-08-01 00:46:50"}
{"level":"error","message":"Failed to initialize SignalWire Voice client: Missing `project`","service":"11wire-api","timestamp":"2025-08-01 00:47:12"}
{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Database connection has been established successfully.","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Database connected successfully","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'campaigns'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_campaigns_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'campaigns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'contacts'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_contacts_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'contacts' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_logs'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_direction' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferStatus' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferType' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_recordings'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_download_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_storage_type' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_recordings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'conversations'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'conversations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'agent_configs'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'agent_configs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_queues'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_queues_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_queues' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'stt_request_mappings'","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'stt_request_mappings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Database models synchronized","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"debug","message":"Executing (default): SELECT count(*) AS \"count\" FROM \"campaigns\" AS \"Campaign\";","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Campaigns already exist, skipping seed","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"All seeders completed successfully","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"WebSocket server initialized for audio streaming","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Initializing scheduled jobs...","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Scheduling job: stt-mapping-cleanup (every 360 minutes)","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Scheduled jobs initialized","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Server running on port 3000","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Environment: development","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"WebSocket server initialized for audio streaming on /stream","service":"11wire-api","timestamp":"2025-08-01 00:47:13"}
{"level":"info","message":"Running initial stt-mapping-cleanup job","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"info","message":"Starting cleanup of old/stale STT request mappings...","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"result_received_at\" < '2025-07-25 05:47:23.264 +00:00' AND \"status\" IN ('completed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"info","message":"Deleted 0 completed mapping(s) older than 7 days","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-31 05:47:23.264 +00:00' AND \"status\" = 'pending'","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"info","message":"Deleted 0 pending mapping(s) older than 1 days","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-29 05:47:23.264 +00:00' AND \"status\" IN ('failed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"info","message":"Deleted 0 failed mapping(s) older than 3 days","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"debug","message":"Executing (default): UPDATE \"stt_request_mappings\" SET \"status\"=$1,\"updatedAt\"=$2 WHERE \"submitted_at\" < '2025-08-01 03:47:23.264 +00:00' AND \"status\" = $3 AND \"result_received_at\" IS NULL","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"info","message":"Marked 0 pending mapping(s) as expired (older than 2 hours)","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"info","message":"STT mapping cleanup completed: 0 deleted, 0 expired","service":"11wire-api","timestamp":"2025-08-01 00:47:23"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"11wire-api","timestamp":"2025-08-01 00:49:07"}
{"level":"error","message":"Failed to initialize SignalWire Voice client: Missing `project`","service":"11wire-api","timestamp":"2025-08-01 00:50:05"}
{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Database connection has been established successfully.","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Database connected successfully","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'campaigns'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_campaigns_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'campaigns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'contacts'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_contacts_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'contacts' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_logs'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_direction' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferStatus' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferType' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_recordings'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_download_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_storage_type' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_recordings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'conversations'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'conversations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'agent_configs'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'agent_configs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_queues'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_queues_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_queues' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'stt_request_mappings'","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'stt_request_mappings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Database models synchronized","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"debug","message":"Executing (default): SELECT count(*) AS \"count\" FROM \"campaigns\" AS \"Campaign\";","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Campaigns already exist, skipping seed","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"All seeders completed successfully","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"WebSocket server initialized for audio streaming","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Initializing scheduled jobs...","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Scheduling job: stt-mapping-cleanup (every 360 minutes)","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Scheduled jobs initialized","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Server running on port 3000","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Environment: development","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"WebSocket server initialized for audio streaming on /stream","service":"11wire-api","timestamp":"2025-08-01 00:50:06"}
{"level":"info","message":"Running initial stt-mapping-cleanup job","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"info","message":"Starting cleanup of old/stale STT request mappings...","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"result_received_at\" < '2025-07-25 05:50:16.478 +00:00' AND \"status\" IN ('completed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"info","message":"Deleted 0 completed mapping(s) older than 7 days","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-31 05:50:16.478 +00:00' AND \"status\" = 'pending'","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"info","message":"Deleted 0 pending mapping(s) older than 1 days","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-29 05:50:16.478 +00:00' AND \"status\" IN ('failed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"info","message":"Deleted 0 failed mapping(s) older than 3 days","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"debug","message":"Executing (default): UPDATE \"stt_request_mappings\" SET \"status\"=$1,\"updatedAt\"=$2 WHERE \"submitted_at\" < '2025-08-01 03:50:16.478 +00:00' AND \"status\" = $3 AND \"result_received_at\" IS NULL","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"info","message":"Marked 0 pending mapping(s) as expired (older than 2 hours)","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"info","message":"STT mapping cleanup completed: 0 deleted, 0 expired","service":"11wire-api","timestamp":"2025-08-01 00:50:16"}
{"level":"debug","message":"ElevenLabs API key status: missing, length: 0","service":"11wire-api","timestamp":"2025-08-01 00:54:00"}
{"level":"debug","message":"API key from config: missing","service":"11wire-api","timestamp":"2025-08-01 00:54:00"}
{"level":"debug","message":"API key from env: missing","service":"11wire-api","timestamp":"2025-08-01 00:54:00"}
{"level":"error","message":"ElevenLabs API health check failed: Invalid value \"undefined\" for header \"xi-api-key\"","service":"11wire-api","timestamp":"2025-08-01 00:54:00"}
{"level":"info","message":"::1 - - [01/Aug/2025:05:54:00 +0000] \"GET /api/health HTTP/1.1\" 200 654 \"-\" \"curl/8.7.1\"","service":"11wire-api","timestamp":"2025-08-01 00:54:00"}
{"level":"debug","message":"ElevenLabs API key status: missing, length: 0","service":"11wire-api","timestamp":"2025-08-01 00:55:58"}
{"level":"debug","message":"API key from config: missing","service":"11wire-api","timestamp":"2025-08-01 00:55:58"}
{"level":"debug","message":"API key from env: missing","service":"11wire-api","timestamp":"2025-08-01 00:55:58"}
{"level":"error","message":"ElevenLabs API health check failed: Invalid value \"undefined\" for header \"xi-api-key\"","service":"11wire-api","timestamp":"2025-08-01 00:55:58"}
{"level":"info","message":"::1 - - [01/Aug/2025:05:55:58 +0000] \"GET /api/health HTTP/1.1\" 200 654 \"-\" \"curl/8.7.1\"","service":"11wire-api","timestamp":"2025-08-01 00:55:58"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"11wire-api","timestamp":"2025-08-01 00:57:49"}
{"level":"error","message":"Failed to initialize SignalWire Voice client: Missing `project`","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"ElevenLabs service initialized, API key status: missing","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Database connection has been established successfully.","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Database connected successfully","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'campaigns'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_campaigns_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'campaigns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'contacts'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_contacts_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'contacts' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_logs'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_direction' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferStatus' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferType' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_recordings'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_download_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_storage_type' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_recordings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'conversations'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'conversations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'agent_configs'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'agent_configs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_queues'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_queues_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_queues' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'stt_request_mappings'","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'stt_request_mappings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Database models synchronized","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"debug","message":"Executing (default): SELECT count(*) AS \"count\" FROM \"campaigns\" AS \"Campaign\";","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Campaigns already exist, skipping seed","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"All seeders completed successfully","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"WebSocket server initialized for audio streaming","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Initializing scheduled jobs...","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Scheduling job: stt-mapping-cleanup (every 360 minutes)","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Scheduled jobs initialized","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Server running on port 3000","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Environment: development","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"WebSocket server initialized for audio streaming on /stream","service":"11wire-api","timestamp":"2025-08-01 00:58:06"}
{"level":"info","message":"Running initial stt-mapping-cleanup job","service":"11wire-api","timestamp":"2025-08-01 00:58:16"}
{"level":"info","message":"Starting cleanup of old/stale STT request mappings...","service":"11wire-api","timestamp":"2025-08-01 00:58:16"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"result_received_at\" < '2025-07-25 05:58:16.944 +00:00' AND \"status\" IN ('completed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 00:58:16"}
{"level":"info","message":"Deleted 0 completed mapping(s) older than 7 days","service":"11wire-api","timestamp":"2025-08-01 00:58:16"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-31 05:58:16.944 +00:00' AND \"status\" = 'pending'","service":"11wire-api","timestamp":"2025-08-01 00:58:16"}
{"level":"info","message":"Deleted 0 pending mapping(s) older than 1 days","service":"11wire-api","timestamp":"2025-08-01 00:58:16"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-29 05:58:16.944 +00:00' AND \"status\" IN ('failed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 00:58:17"}
{"level":"info","message":"Deleted 0 failed mapping(s) older than 3 days","service":"11wire-api","timestamp":"2025-08-01 00:58:17"}
{"level":"debug","message":"Executing (default): UPDATE \"stt_request_mappings\" SET \"status\"=$1,\"updatedAt\"=$2 WHERE \"submitted_at\" < '2025-08-01 03:58:16.944 +00:00' AND \"status\" = $3 AND \"result_received_at\" IS NULL","service":"11wire-api","timestamp":"2025-08-01 00:58:17"}
{"level":"info","message":"Marked 0 pending mapping(s) as expired (older than 2 hours)","service":"11wire-api","timestamp":"2025-08-01 00:58:17"}
{"level":"info","message":"STT mapping cleanup completed: 0 deleted, 0 expired","service":"11wire-api","timestamp":"2025-08-01 00:58:17"}
{"level":"info","message":"SIGINT received, shutting down gracefully","service":"11wire-api","timestamp":"2025-08-01 00:59:30"}
{"level":"error","message":"Failed to initialize SignalWire Voice client: Missing `project`","service":"11wire-api","timestamp":"2025-08-01 01:08:26"}
{"level":"debug","message":"ElevenLabs service initialized, API key status: missing","service":"11wire-api","timestamp":"2025-08-01 01:08:26"}
{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"info","message":"Database connection has been established successfully.","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"info","message":"Database connected successfully","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'campaigns'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_campaigns_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'campaigns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'contacts'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_contacts_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'contacts' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_logs'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_direction' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferStatus' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferType' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_recordings'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_download_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_storage_type' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_recordings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'conversations'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'conversations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'agent_configs'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'agent_configs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_queues'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_queues_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_queues' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'stt_request_mappings'","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'stt_request_mappings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"info","message":"Database models synchronized","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"debug","message":"Executing (default): SELECT count(*) AS \"count\" FROM \"campaigns\" AS \"Campaign\";","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"info","message":"Campaigns already exist, skipping seed","service":"11wire-api","timestamp":"2025-08-01 01:08:27"}
{"level":"error","message":"Failed to initialize SignalWire Voice client: Missing `project`","service":"11wire-api","timestamp":"2025-08-01 01:11:52"}
{"level":"debug","message":"ElevenLabs service initialized, API key status: missing","service":"11wire-api","timestamp":"2025-08-01 01:11:52"}
{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"11wire-api","timestamp":"2025-08-01 01:11:53"}
{"level":"info","message":"Database connection has been established successfully.","service":"11wire-api","timestamp":"2025-08-01 01:11:53"}
{"level":"info","message":"Database connected successfully","service":"11wire-api","timestamp":"2025-08-01 01:11:53"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'campaigns'","service":"11wire-api","timestamp":"2025-08-01 01:11:53"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_campaigns_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:53"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'campaigns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:53"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'contacts'","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_contacts_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'contacts' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_logs'","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_direction' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferStatus' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_logs_transferType' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_logs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_recordings'","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_download_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_recordings_storage_type' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_recordings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'conversations'","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'conversations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'agent_configs'","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'agent_configs' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'call_queues'","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_call_queues_status' GROUP BY 1","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'call_queues' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'stt_request_mappings'","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'stt_request_mappings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Database models synchronized","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"debug","message":"Executing (default): SELECT count(*) AS \"count\" FROM \"campaigns\" AS \"Campaign\";","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Campaigns already exist, skipping seed","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"All seeders completed successfully","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"WebSocket server initialized for audio streaming","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Initializing scheduled jobs...","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Scheduling job: stt-mapping-cleanup (every 360 minutes)","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Scheduled jobs initialized","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Server running on port 3000","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Environment: development","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"WebSocket server initialized for audio streaming on /stream","service":"11wire-api","timestamp":"2025-08-01 01:11:54"}
{"level":"info","message":"Running initial stt-mapping-cleanup job","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"info","message":"Starting cleanup of old/stale STT request mappings...","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"result_received_at\" < '2025-07-25 06:12:04.149 +00:00' AND \"status\" IN ('completed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"info","message":"Deleted 0 completed mapping(s) older than 7 days","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-31 06:12:04.149 +00:00' AND \"status\" = 'pending'","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"info","message":"Deleted 0 pending mapping(s) older than 1 days","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-29 06:12:04.149 +00:00' AND \"status\" IN ('failed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"info","message":"Deleted 0 failed mapping(s) older than 3 days","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"debug","message":"Executing (default): UPDATE \"stt_request_mappings\" SET \"status\"=$1,\"updatedAt\"=$2 WHERE \"submitted_at\" < '2025-08-01 04:12:04.149 +00:00' AND \"status\" = $3 AND \"result_received_at\" IS NULL","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"info","message":"Marked 0 pending mapping(s) as expired (older than 2 hours)","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"info","message":"STT mapping cleanup completed: 0 deleted, 0 expired","service":"11wire-api","timestamp":"2025-08-01 01:12:04"}
{"level":"info","message":"WebSocket connection established for call: TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:48"}
{"level":"debug","message":"Stream connected for call TEST_CALL_1754028948226, protocol: signalwire-stream-v1, version: 1.0.0","service":"11wire-api","timestamp":"2025-08-01 01:15:48"}
{"level":"debug","message":"Stream started for call TEST_CALL_1754028948226, format: {\"encoding\":\"audio/x-mulaw\",\"sampleRate\":8000,\"channels\":1}","service":"11wire-api","timestamp":"2025-08-01 01:15:49"}
{"level":"info","message":"Audio bridge session initialized for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:49"}
{"level":"debug","message":"Media format: {\"encoding\":\"audio/x-mulaw\",\"sampleRate\":8000,\"channels\":1}","service":"11wire-api","timestamp":"2025-08-01 01:15:49"}
{"level":"info","message":"Initializing async STT for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:49"}
{"level":"info","message":"Async STT initialized for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:49"}
{"level":"info","message":"TTS connection ready for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:49"}
{"level":"error","message":"Error processing audio for ElevenLabs: ULawDecoder is not defined","service":"11wire-api","timestamp":"2025-08-01 01:15:50"}
{"level":"info","message":"Submitting 1 audio chunks (160 bytes) for async STT - call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:50"}
{"level":"info","message":"Submitting async STT request [mdsfjrwizavia] for call TEST_CALL_1754028948226:\n - Format: wav (always using WAV for STT)\n - Sample rate: 8000 Hz\n - Audio size: 160 bytes\n - Webhook URL: https://your-domain.com/api/webhooks/elevenlabs","service":"11wire-api","timestamp":"2025-08-01 01:15:50"}
{"callSid":"TEST_CALL_1754028948226","code":"API_KEY_CONFIG_ERROR","context":{},"level":"error","message":"CRITICAL: ElevenLabs API key is not configured.","name":"ElevenLabsConnectionError","retryable":false,"service":"11wire-api","timestamp":"2025-08-01T06:15:50.274Z"}
{"level":"info","message":"Audio conversion path for call TEST_CALL_1754028948226: mulaw_to_pcm -> resample -> bit_depth","service":"11wire-api","timestamp":"2025-08-01 01:15:50"}
{"level":"debug","message":"Audio conversion performance: avg=0.13ms, call=TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:52"}
{"level":"debug","message":"Stream stopped for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:53"}
{"level":"info","message":"Closing audio bridge for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:53"}
{"level":"info","message":"Audio bridge for call TEST_CALL_1754028948226 closed and removed","service":"11wire-api","timestamp":"2025-08-01 01:15:53"}
{"level":"info","message":"Cleaned up stream session for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:53"}
{"level":"info","message":"WebSocket connection closed for call TEST_CALL_1754028948226","service":"11wire-api","timestamp":"2025-08-01 01:15:53"}
{"level":"info","message":"WebSocket connection established for call: TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:03"}
{"level":"debug","message":"Stream connected for call TEST_CALL_1754029143616, protocol: signalwire-stream-v1, version: 1.0.0","service":"11wire-api","timestamp":"2025-08-01 01:19:03"}
{"level":"debug","message":"Stream started for call TEST_CALL_1754029143616, format: {\"encoding\":\"audio/x-mulaw\",\"sampleRate\":8000,\"channels\":1}","service":"11wire-api","timestamp":"2025-08-01 01:19:04"}
{"level":"info","message":"Audio bridge session initialized for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:04"}
{"level":"debug","message":"Media format: {\"encoding\":\"audio/x-mulaw\",\"sampleRate\":8000,\"channels\":1}","service":"11wire-api","timestamp":"2025-08-01 01:19:04"}
{"level":"info","message":"Initializing async STT for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:04"}
{"level":"info","message":"Async STT initialized for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:04"}
{"level":"info","message":"TTS connection ready for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:05"}
{"level":"error","message":"Error processing audio for ElevenLabs: ULawDecoder is not defined","service":"11wire-api","timestamp":"2025-08-01 01:19:05"}
{"level":"info","message":"Submitting 1 audio chunks (160 bytes) for async STT - call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:05"}
{"level":"info","message":"Submitting async STT request [mdsfnyonlkgki] for call TEST_CALL_1754029143616:\n - Format: wav (always using WAV for STT)\n - Sample rate: 8000 Hz\n - Audio size: 160 bytes\n - Webhook URL: https://your-domain.com/api/webhooks/elevenlabs","service":"11wire-api","timestamp":"2025-08-01 01:19:05"}
{"callSid":"TEST_CALL_1754029143616","code":"API_KEY_CONFIG_ERROR","context":{},"level":"error","message":"CRITICAL: ElevenLabs API key is not configured.","name":"ElevenLabsConnectionError","retryable":false,"service":"11wire-api","timestamp":"2025-08-01T06:19:05.688Z"}
{"level":"info","message":"Audio conversion path for call TEST_CALL_1754029143616: mulaw_to_pcm -> resample -> bit_depth","service":"11wire-api","timestamp":"2025-08-01 01:19:05"}
{"level":"debug","message":"Audio conversion performance: avg=0.09ms, call=TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:07"}
{"level":"debug","message":"Stream stopped for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:08"}
{"level":"info","message":"Closing audio bridge for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:08"}
{"level":"info","message":"Audio bridge for call TEST_CALL_1754029143616 closed and removed","service":"11wire-api","timestamp":"2025-08-01 01:19:08"}
{"level":"info","message":"Cleaned up stream session for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:08"}
{"level":"info","message":"WebSocket connection closed for call TEST_CALL_1754029143616","service":"11wire-api","timestamp":"2025-08-01 01:19:08"}
{"level":"info","message":"Starting cleanup of old/stale STT request mappings...","service":"11wire-api","timestamp":"2025-08-01 07:42:37"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"result_received_at\" < '2025-07-25 12:42:37.517 +00:00' AND \"status\" IN ('completed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"info","message":"Deleted 0 completed mapping(s) older than 7 days","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-31 12:42:37.517 +00:00' AND \"status\" = 'pending'","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"info","message":"Deleted 0 pending mapping(s) older than 1 days","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"debug","message":"Executing (default): DELETE FROM \"stt_request_mappings\" WHERE \"submitted_at\" < '2025-07-29 12:42:37.517 +00:00' AND \"status\" IN ('failed', 'expired')","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"info","message":"Deleted 0 failed mapping(s) older than 3 days","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"debug","message":"Executing (default): UPDATE \"stt_request_mappings\" SET \"status\"=$1,\"updatedAt\"=$2 WHERE \"submitted_at\" < '2025-08-01 10:42:37.517 +00:00' AND \"status\" = $3 AND \"result_received_at\" IS NULL","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"info","message":"Marked 1 pending mapping(s) as expired (older than 2 hours)","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"info","message":"STT mapping cleanup completed: 0 deleted, 1 expired","service":"11wire-api","timestamp":"2025-08-01 07:42:40"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"11wire-api","timestamp":"2025-08-01 11:16:39"}
